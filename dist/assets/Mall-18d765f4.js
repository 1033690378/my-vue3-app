/* empty css             */import{E as v,a as B,b as D}from"./el-message-945674a4.js";import{E as M,a as G,b as S}from"./el-table-column-f15a53ec.js";import{E as T}from"./el-col-95da4748.js";import{a as q,b as A,E as L}from"./el-input-a9cb74ed.js";import"./el-tooltip-db17e88d.js";import{E as N}from"./el-button-972a3e7a.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{d as j,h as z,r as C,a0 as h,o as K,a as w,c as $,k as F,K as l,w as a,ab as f,W as U,af as O,l as R,ai as I}from"./index-428d8faa.js";import"./index-884d22f0.js";import"./use-form-item-abed0c88.js";import"./event-137c0412.js";import"./error-f1912ce6.js";const W=j({setup(){const{proxy:e}=z(),n=C([]),k=h([{prop:"name",label:"商品名"},{prop:"price",label:"价格"},{prop:"addr",label:"图片地址",width:320}]);K(()=>{i(s)});const s=h({total:0,page:1,name:""}),i=async t=>{let c=await e.$api.getGoodsData(t);console.log(c,"res"),n.value=c.list,t.total=c.count},E=t=>{s.page=t,i(s)},d=h({keyword:""}),p=()=>{s.name=d.keyword,i(s)},r=C(!1),_=t=>{v.confirm("确定关闭吗?").then(()=>{e.$refs.userForm.resetFields(),t()}).catch(()=>{})},u=h({name:"",price:"",addr:""}),g=()=>{e.$refs.userForm.validate(async t=>{t?m.value=="add"?await e.$api.addGoods(u)&&(r.value=!1,e.$refs.userForm.resetFields(),i(s)):await e.$api.editGoods(u)&&(r.value=!1,e.$refs.userForm.resetFields(),i(s)):I({showClose:!0,message:"请输入正确的内容",type:"error"})})},y=()=>{r.value=!1,e.$refs.userForm.resetFields()},m=C("add");return{list:n,tableLabel:k,config:s,changePage:E,formInline:d,handleSerch:p,dialogVisible:r,handleClose:_,formUser:u,onSubmit:g,handleCancel:y,action:m,handleEdit:t=>{m.value="edit",r.value=!0,e.$nextTick(()=>{Object.assign(u,t)})},handleAdd:()=>{m.value="add",r.value=!0},handleDelete:t=>{v.confirm("你确定删除吗?").then(async()=>{await e.$api.deleteGoods({id:t.id}),I({showClose:!0,message:"删除成功",type:"success"}),i(s)}).catch(()=>{})}}}}),H={class:"user-header"},J={class:"table"};function Q(e,n,k,s,i,E){const d=N,p=q,r=A,_=L,u=M,g=G,y=B,m=T,b=S,V=D;return w(),$(U,null,[F("div",H,[l(d,{type:"primary",onClick:e.handleAdd},{default:a(()=>[f("+新增")]),_:1},8,["onClick"]),l(_,{inline:!0,model:e.formInline},{default:a(()=>[l(r,{label:"请输入"},{default:a(()=>[l(p,{modelValue:e.formInline.keyword,"onUpdate:modelValue":n[0]||(n[0]=o=>e.formInline.keyword=o),placeholder:"请输入商品名"},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[l(d,{type:"primary",onClick:e.handleSerch},{default:a(()=>[f("搜索")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),F("div",J,[l(g,{data:e.list,style:{width:"100%"},height:"500px"},{default:a(()=>[(w(!0),$(U,null,O(e.tableLabel,o=>(w(),R(u,{key:o.prop,label:o.label,prop:o.prop,width:o.width?o.width:125},null,8,["label","prop","width"]))),128)),l(u,{fixed:"right",label:"操作","min-width":"180"},{default:a(o=>[l(d,{size:"small",onClick:t=>e.handleEdit(o.row)},{default:a(()=>[f("编辑")]),_:2},1032,["onClick"]),l(d,{type:"danger",size:"small",onClick:t=>e.handleDelete(o.row)},{default:a(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(y,{small:"",background:"",layout:"prev, pager, next",total:e.config.total,onCurrentChange:e.changePage,class:"pager mt-4"},null,8,["total","onCurrentChange"])]),l(V,{modelValue:e.dialogVisible,"onUpdate:modelValue":n[4]||(n[4]=o=>e.dialogVisible=o),title:e.action=="add"?"新增商品":"编辑商品",width:"35%","before-close":e.handleClose},{default:a(()=>[l(_,{inline:!0,model:e.formUser,ref:"userForm"},{default:a(()=>[l(b,null,{default:a(()=>[l(m,{span:12},{default:a(()=>[l(r,{label:"商品名",prop:"name",rules:[{required:!0,message:"商品名是必填项"}]},{default:a(()=>[l(p,{modelValue:e.formUser.name,"onUpdate:modelValue":n[1]||(n[1]=o=>e.formUser.name=o),placeholder:"请输入商品名"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:12},{default:a(()=>[l(r,{label:"价格",prop:"price",rules:[{required:!0,message:"价格是必填项"},{type:"number",message:"价格必须是数字"}]},{default:a(()=>[l(p,{modelValue:e.formUser.price,"onUpdate:modelValue":n[2]||(n[2]=o=>e.formUser.price=o),modelModifiers:{number:!0},placeholder:"请输入价格"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(b,null,{default:a(()=>[l(r,{label:"图片地址",prop:"addr",rules:[{required:!0,message:"图片地址是必填项"}]},{default:a(()=>[l(p,{modelValue:e.formUser.addr,"onUpdate:modelValue":n[3]||(n[3]=o=>e.formUser.addr=o),placeholder:"请输入图片地址"},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{style:{"justify-content":"flex-end"}},{default:a(()=>[l(r,null,{default:a(()=>[l(d,{type:"primary",onClick:e.handleCancel},{default:a(()=>[f("取消")]),_:1},8,["onClick"]),l(d,{type:"primary",onClick:e.onSubmit},{default:a(()=>[f("确定")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])],64)}const ie=P(W,[["render",Q],["__scopeId","data-v-c5afcb32"]]);export{ie as default};
